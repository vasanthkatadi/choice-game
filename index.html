<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Destiny Reveal</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(135deg,#141e30,#243b55);
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    text-align:center;
    overflow:hidden;
}

.container{
    width:90%;
    max-width:400px;
}

.cards{
    display:flex;
    justify-content:space-between;
    margin-top:20px;
}

.card{
    width:45%;
    height:120px;
    background:#333;
    border-radius:12px;
    display:flex;
    justify-content:center;
    align-items:center;
    cursor:pointer;
    transition:all 0.4s ease;
    font-weight:bold;
    padding:10px;
    font-size:18px;
}

.hidden{
    background:#777;
}

button{
    margin-top:20px;
    padding:10px 20px;
    border:none;
    border-radius:8px;
    background:#ff0044;
    color:white;
    font-size:16px;
    cursor:pointer;
}

/* Outline Heart */
.heart-container{
    display:none;
    margin-top:30px;
}

svg{
    width:140px;
    height:140px;
    filter:drop-shadow(0 0 15px red);
    animation:glowPulse 1.5s infinite alternate;
}

.heart-text{
    margin-top:-90px;
    font-size:20px;
    font-weight:bold;
}

@keyframes glowPulse{
    from{
        filter:drop-shadow(0 0 10px red);
    }
    to{
        filter:drop-shadow(0 0 25px red);
    }
}
</style>
</head>

<body>

<div class="container">
    <h2 id="title">Memorize both options carefully</h2>

    <div class="cards">
        <div class="card" id="card1"></div>
        <div class="card" id="card2"></div>
    </div>

    <button id="shuffleBtn">Shuffle Now</button>

    <div class="heart-container" id="heartBox">
        <svg viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2">
            <path d="M12 21s-6.5-4.35-9.5-8.28C-0.5 8.5 3 4 7 6c2 1 3 3 5 5 2-2 3-4 5-5 4-2 7.5 2.5 4.5 6.72C18.5 16.65 12 21 12 21z"/>
        </svg>
        <div class="heart-text" id="heartText"></div>
    </div>
</div>

<script>
const params = new URLSearchParams(window.location.search);
const optionA = params.get("A");
const optionB = params.get("B");
const forced = params.get("F");

if(!optionA || !optionB || !forced){
    document.body.innerHTML="<h2 style='color:white'>Missing URL parameters.</h2>";
    throw new Error("Missing parameters");
}

const card1 = document.getElementById("card1");
const card2 = document.getElementById("card2");
const shuffleBtn = document.getElementById("shuffleBtn");
const title = document.getElementById("title");
const heartBox = document.getElementById("heartBox");
const heartText = document.getElementById("heartText");

card1.innerText = optionA;
card2.innerText = optionB;

let shuffled = false;
let gameOver = false;

shuffleBtn.onclick = () => {
    card1.innerText = "";
    card2.innerText = "";
    card1.classList.add("hidden");
    card2.classList.add("hidden");
    shuffleBtn.style.display="none";
    title.innerText="Choose one card";
    shuffled = true;
};

card1.onclick = () => reveal(card1, card2);
card2.onclick = () => reveal(card2, card1);

function reveal(selected, other){
    if(!shuffled || gameOver) return;
    gameOver = true;

    let chosen;

    if(forced === "A"){
        selected.innerText = optionA;
        chosen = optionA;
        setTimeout(()=>{ other.innerText = optionB; },1000);
    } else {
        selected.innerText = optionB;
        chosen = optionB;
        setTimeout(()=>{ other.innerText = optionA; },1000);
    }

    selected.classList.remove("hidden");
    other.classList.remove("hidden");

    setTimeout(()=>{
        heartText.innerText = chosen;
        heartBox.style.display="block";
    },1200);
}
</script>

</body>
</html>
